(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c189e7a"],{"1b2f":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",[t("div",{staticClass:"userCenter-form"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules}},[t("el-form-item",{attrs:{prop:"oldphone"}},[t("el-input",{attrs:{placeholder:"请输入已绑定手机号码"},model:{value:e.ruleForm.oldphone,callback:function(r){e.$set(e.ruleForm,"oldphone",e._n(r))},expression:"ruleForm.oldphone"}})],1),t("el-form-item",{staticClass:"yzm",attrs:{prop:"registerCode",error:e.errMsg_yzm}},[t("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.ruleForm.registerCode,callback:function(r){e.$set(e.ruleForm,"registerCode",r)},expression:"ruleForm.registerCode"}}),t("el-button",{attrs:{type:"text",disabled:e.captchaDisable},on:{click:e.codeBtnAction}},[e._v("\n                    "+e._s(e.codeBtnValue)+"\n                ")])],1),t("el-form-item",{attrs:{prop:"newphone"}},[t("el-input",{attrs:{placeholder:"请输入新手机号码"},model:{value:e.ruleForm.newphone,callback:function(r){e.$set(e.ruleForm,"newphone",e._n(r))},expression:"ruleForm.newphone"}})],1),e.regMsg?t("el-form-item",{attrs:{error:e.regMsg}}):e._e(),t("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.click}},[e._v("立即绑定")])],1)],1)])},n=[],s=t("beff"),a=t("9ad8"),i={name:"UserPhone",components:{elInput:s["Input"],elButton:s["Button"],elForm:s["Form"],elFormItem:s["FormItem"]},data:function(){return{regMsg:"",errMsg_yzm:"",captchaDisable:!0,codeBtnValue:"点击发送验证码",ruleForm:{oldphone:"",newphone:"",registerCode:""},rules:{oldphone:[{required:!0,validator:this.checkoldPhone,trigger:"change"}],newphone:[{required:!0,validator:this.checknewPhone,trigger:"change"}],registerCode:[{required:!0,validator:this.checkRegisterCode,trigger:"blur"}]}}},mounted:function(){},methods:{checkoldPhone:function(e,r,t){if(!r)return this.captchaDisable=!0,t(new Error("手机号不能为空"));var o=/^1[3|4|5|7|8][0-9]\d{8}$/;if(!o.test(r))return this.captchaDisable=!0,t(new Error("请输入正确的手机号"));t(),this.captchaDisable=!1},checknewPhone:function(e,r,t){if(!r)return this.captchaDisable=!0,t(new Error("手机号不能为空"));var o=/^1[3|4|5|7|8][0-9]\d{8}$/;if(!o.test(r))return t(new Error("请输入正确的手机号"));t()},checkRegisterCode:function(e,r,t){if(!r)return t(new Error("短信验证码不能为空"));var o=/^\d{6}$/;if(!o.test(r))return t(new Error("请输入正确的短信验证码"));t()},codeBtnAction:function(){var e=this;a["a"].post("/web/register/sendMsg",{phone:this.ruleForm.oldphone}).then(function(r){console.log(r),0!=r.data.code&&(e.errMsg_yzm=r.data.msg)}).catch(function(e){console.log(e)});var r=60,t=setInterval(function(){e.codeBtnValue=r-1+"秒后重新发送",r--,e.captchaDisable=!0,0==r&&(clearTimeout(t),e.codeBtnValue="重新发送验证码",e.captchaDisable=!1)},1e3)},validateForm:function(){var e=!1;return this.$refs["ruleForm"].validate(function(r){e=r}),e},click:function(){var e=this;this.validateForm()&&a["a"].post("/web/user/changePhone",{oldPhone:this.ruleForm.oldphone,newPhone:this.ruleForm.newphone,checkCode:this.ruleForm.registerCode}).then(function(r){0==r.data.code?Object(s["MessageBox"])({title:"操作提示",type:"success",message:"修改成功"}).then(function(){e.$router.push("/userCenter/info")}):e.regMsg=r.data.msg})}}},l=i,c=(t("e7f5"),t("048f")),u=Object(c["a"])(l,o,n,!1,null,"214649b7",null);u.options.__file="UserPhone.vue";r["default"]=u.exports},abed:function(e,r,t){},e7f5:function(e,r,t){"use strict";var o=t("abed"),n=t.n(o);n.a}}]);
//# sourceMappingURL=chunk-2c189e7a.3d19380f.js.map