(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72b0d582"],{"0fee":function(e,t,r){"use strict";var a=r("19ea"),i=r.n(a);i.a},"19ea":function(e,t,r){},"5e05":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"userCenter-form"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入需要绑定的邮箱"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{staticClass:"yzm",attrs:{prop:"emailCode",error:e.errMsg_yzm}},[r("el-input",{attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.ruleForm.emailCode,callback:function(t){e.$set(e.ruleForm,"emailCode",t)},expression:"ruleForm.emailCode"}}),r("el-button",{attrs:{type:"text",disabled:e.captchaDisable},on:{click:e.codeBtnAction}},[e._v("\n                    "+e._s(e.codeBtnValue)+"\n                ")])],1),e.regMsg?r("el-form-item",{attrs:{error:e.regMsg}}):e._e(),r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.click}},[e._v("绑定")])],1)],1)])},i=[],l=r("beff"),o=r("9ad8"),s={name:"UserEmail",components:{elInput:l["Input"],elButton:l["Button"],elForm:l["Form"],elFormItem:l["FormItem"]},data:function(){return{regMsg:"",errMsg_yzm:"",captchaDisable:!0,codeBtnValue:"点击发送验证码",ruleForm:{email:"",emailCode:""},rules:{email:[{required:!0,validator:this.checemail,trigger:"change"}],emailCode:[{required:!0,validator:this.checkemailCode,trigger:"blur"}]}}},methods:{checemail:function(e,t,r){if(!t)return this.captchaDisable=!0,r(new Error("邮箱不能为空"));var a=/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/;if(!a.test(t))return this.captchaDisable=!0,r(new Error("请输入正确的邮箱"));r(),this.captchaDisable=!1},checkemailCode:function(e,t,r){if(!t)return r(new Error("邮箱验证码不能为空"));var a=/^\d{6}$/;if(!a.test(t))return r(new Error("请输入正确的邮箱验证码"));r()},codeBtnAction:function(){var e=this;o["a"].post("/web/user/sendMail",{mail:this.ruleForm.email}).then(function(t){0!=t.data.code&&(e.errMsg_yzm=t.data.msg)}).catch(function(e){console.log(e)});var t=60,r=setInterval(function(){e.codeBtnValue=t-1+"秒后重新发送",t--,e.captchaDisable=!0,0==t&&(clearTimeout(r),e.codeBtnValue="重新发送验证码",e.captchaDisable=!1)},1e3)},validateForm:function(){var e=!1;return this.$refs["ruleForm"].validate(function(t){e=t}),e},click:function(){var e=this;this.validateForm()&&o["a"].post("/web/user/changeEmail",{mail:this.ruleForm.email,mailVerCode:this.ruleForm.emailCode}).then(function(t){0==t.data.code?Object(l["Message"])({type:"success",message:"修改成功"}):e.regMsg=t.data.msg})}}},n=s,c=(r("0fee"),r("048f")),u=Object(c["a"])(n,a,i,!1,null,"6eb3d2f0",null);u.options.__file="UserEmail.vue";t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-72b0d582.4601356e.js.map