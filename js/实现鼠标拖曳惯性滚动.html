<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2017 by hudhudhud (http://jsbin.com/sapugil/12/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
<style id="jsbin-css">
section{
  height:400px;
  top:0;
  left:0;
  overflow:scroll;
  user-select:none;
}
</style>
</head>
<body>
<section id=a>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quod recusandae provident et voluptatibus, eaque unde hic mollitia? Laudantium, modi eos ducimus veniam assumenda tempora quisquam! Nam quos at reiciendis sunt quis, quae aperiam vero inventore veniam ex? Possimus nihil expedita, quibusdam, non eveniet sunt quasi sequi veniam recusandae nesciunt corporis numquam fugit beatae. Quod, aut. Quas exercitationem quidem minima vel voluptatem et dolorum quo corrupti obcaecati aliquam nostrum cum iste laudantium, labore illum ratione fugiat nisi, repudiandae voluptates dignissimos ad ut! Illum commodi totam, similique atque ducimus eligendi et beatae consequatur, veniam inventore animi facilis voluptatem molestias? Provident, magni placeat?</div>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rem nesciunt beatae inventore recusandae possimus non cumque, ducimus totam voluptatibus a explicabo, optio quidem praesentium molestias voluptatem veniam animi culpa error eum iusto quia exercitationem. Nulla magni ut delectus sint ea, commodi veritatis tenetur error itaque laudantium, qui ab in, aliquid quod, totam perspiciatis est rem eveniet. Distinctio corporis, recusandae nulla ducimus. Quam quidem harum totam, minus non ducimus doloribus obcaecati quaerat facilis fugiat magni officia distinctio, sequi, quod. Eos autem ab ipsum vitae iste culpa nostrum deserunt, fugiat qui, est et dicta asperiores laboriosam provident nam exercitationem praesentium rerum, nemo consectetur! Libero cumque optio reiciendis facilis officiis porro eligendi, eum voluptatum, in numquam ipsa atque, at tempora temporibus aspernatur eos totam. Similique obcaecati nemo aliquid harum, excepturi quidem, cum architecto ratione, quod dolores ab libero inventore suscipit veniam reiciendis earum dolor minima. Consequuntur aperiam voluptatum saepe maiores voluptatem dolorum asperiores laboriosam modi quis debitis maxime deleniti doloremque blanditiis, illo soluta, ullam atque? Eveniet, magnam! Repudiandae magnam, est modi quia a consequatur adipisci alias ullam quos sunt quaerat, veniam nobis fuga distinctio minus dolore voluptate doloribus reprehenderit expedita voluptatum repellendus asperiores doloremque error. Maiores perferendis delectus voluptatibus asperiores, eaque nulla sequi aliquam, sapiente, error deleniti sed mollitia adipisci distinctio est, ipsa architecto esse inventore omnis velit provident iste dolor alias neque. Quas aliquam accusamus animi, necessitatibus, itaque pariatur ex veniam delectus cum. Deserunt dolores facilis et reprehenderit dicta voluptates esse ipsam sunt sequi aut! Deleniti ducimus ipsum qui rerum quos nemo mollitia, maiores temporibus iste perferendis ut velit optio deserunt aspernatur nisi, aliquid nam quo quisquam recusandae omnis officia aperiam minima minus enim! Ea nesciunt nemo ullam eveniet. Assumenda totam, culpa eligendi adipisci! Necessitatibus ipsam ducimus eius nihil animi minima magnam sed, neque dolores delectus natus quia officiis accusantium iste ratione molestias incidunt, provident alias eligendi facere odio. Libero voluptates reiciendis voluptatum iure ipsa sequi error minus nihil ad ipsam architecto saepe a quibusdam sapiente id delectus expedita commodi minima sunt, facilis! Sapiente aperiam possimus omnis dolore, neque assumenda saepe perspiciatis inventore eveniet cumque nihil sint totam non consectetur beatae dicta enim ipsam, est ab modi commodi officiis suscipit. Commodi sequi eveniet nam, assumenda saepe quasi iusto nesciunt dignissimos similique inventore facere, eum voluptatibus repellat ratione deleniti. Aliquid consequuntur ipsam cum alias quia qui placeat, veritatis laudantium harum eligendi reprehenderit facere, id quasi consectetur tempora nesciunt inventore perspiciatis asperiores. Dolores cum minima maxime eveniet officiis dicta eligendi quidem aliquam, mollitia sed tenetur, fuga odio? Voluptas, sunt atque quia quo eaque voluptate laborum excepturi molestias. Non commodi aspernatur perferendis assumenda libero ullam maiores repellat amet quod aperiam necessitatibus magni odit minima vitae consequatur facilis, fugiat culpa nisi! Magnam laboriosam ipsum provident qui beatae ex expedita labore adipisci quaerat eligendi. Quia aliquid tempora, temporibus debitis, dolorem accusantium nulla ratione quasi molestiae fuga placeat, vitae delectus commodi iste excepturi atque cum velit animi laboriosam, iusto maiores. Amet quia, eveniet minus facere voluptatibus officiis rerum quaerat architecto assumenda maiores a praesentium earum ducimus aspernatur nulla facilis voluptas enim blanditiis obcaecati ut, asperiores fugit. Aspernatur reiciendis sequi repellendus eaque itaque, pariatur harum possimus ut ipsum similique rerum non blanditiis reprehenderit odit nobis quis perferendis nostrum, nihil a dignissimos in. Iste hic eos perspiciatis non nemo quis alias, similique. Explicabo nostrum ipsam laboriosam blanditiis ut corporis nam porro mollitia cupiditate, in et incidunt, esse facilis. Quidem eaque corrupti, in nostrum perspiciatis? Error eum tenetur esse dignissimos adipisci a ipsa consectetur iusto, dolorum ipsam sed optio quae est. Quibusdam, blanditiis, tempora. Nemo inventore vitae esse delectus magni, earum libero repellendus necessitatibus, eveniet voluptates, veniam repudiandae ducimus nulla neque quis corporis placeat rerum, in deserunt ipsam eius aliquid! Necessitatibus neque, mollitia vero tempora expedita recusandae, error beatae voluptatibus repudiandae fugit, sapiente nemo maiores ducimus pariatur assumenda, veniam quibusdam quisquam eius. Nemo numquam laudantium inventore ut qui quia iusto, a possimus voluptatibus labore in esse earum quae est vel consequatur sint velit nostrum dolor, nobis quasi corporis. Qui iste magni fugit, vitae quos optio saepe, tempore? Reprehenderit repudiandae deserunt similique deleniti veniam sed quos earum in laudantium eligendi! Vitae rerum quasi quisquam minima perferendis adipisci libero architecto, autem hic rem veritatis. Incidunt quis perspiciatis, quia nemo cum laboriosam earum at facilis in enim tempora illum architecto minima officiis dolore, eligendi molestias sit, quasi reprehenderit voluptate deleniti. Cum beatae libero maiores, provident quisquam mollitia odio aliquam nihil quis expedita dignissimos, fugiat adipisci dolore, quas quia rem. Aliquam libero possimus, nihil, rerum animi, dicta iste odio qui molestias et ea! Ullam, excepturi! Impedit, placeat exercitationem ratione voluptatibus ipsum quidem quam obcaecati distinctio cum veritatis dicta saepe tempore officia perferendis nemo assumenda deleniti. Incidunt mollitia voluptas porro provident laboriosam! Quam quae sit, quisquam repellendus aspernatur possimus enim? Ipsum enim cupiditate, distinctio repellendus, ex modi sequi totam omnis id laboriosam optio alias eos, voluptate veritatis odio quos hic nihil deserunt dolore neque error? Tenetur nemo cum, sapiente maxime. Eligendi, possimus pariatur vero perspiciatis odit libero voluptates id. Inventore laboriosam sint optio necessitatibus quo veniam nisi, unde aperiam odit asperiores ea, amet nesciunt, dolore. Nemo deleniti culpa natus explicabo dolorem iste, similique eaque rerum dolore tempora amet facilis beatae tenetur, a cum provident distinctio at dignissimos inventore asperiores qui veniam voluptate ad in. Ad, asperiores labore neque eveniet deserunt expedita ducimus exercitationem sit ipsa praesentium facere laboriosam laborum sunt consequuntur inventore? Odit laborum nulla beatae blanditiis, odio iusto error laboriosam iste! Omnis commodi, quo fuga pariatur impedit ratione quisquam dolor totam sequi sapiente odio aspernatur possimus perspiciatis et quis, alias? Unde voluptate illum blanditiis libero veniam aperiam labore minima ullam odit, doloremque repellendus a adipisci suscipit culpa, id officiis maxime porro cumque beatae voluptatum nam officia! Error explicabo consequuntur provident odit, esse minima illum, sapiente laudantium quod quae pariatur ut officia enim omnis dolores facilis totam iusto ea sit at quasi impedit, eligendi distinctio. Impedit amet aut saepe vitae, voluptatem animi aperiam. Quasi atque nam reprehenderit sint dolores doloremque natus qui dicta voluptatibus nobis recusandae debitis voluptate nesciunt, excepturi voluptas laborum cumque maiores, dolorum aut.</section>
<script id="jsbin-javascript">
var lastY=a.scrollTop,lastlastY=0
var lastMouseY=0
var ifScroll=false
var rid
var rfunc
setInterval(function(){
  [lastlastY,lastY]=[lastY,a.scrollTop]
},32)
a.addEventListener("mousedown",function(e){
  lastY=e.clientY
  ifScroll=true
  cancelAnimationFrame(rid)
}
)
a.addEventListener("mousemove",function(e){
  if(ifScroll){
    var d=e.clientY-lastMouseY//若鼠标往上拖，则该值肯定为负的，但页面需要往下滚动，所以下面为-d
    a.scrollTop+=-d
    lastMouseY=e.clientY
  }
}
)

a.addEventListener("mouseup",function(e){
  ifScroll=false
  console.log(lastY-lastlastY)
  var stopTime=Date.now()
  rid=requestAnimationFrame(rfunc=function(){
    var now=Date.now()
    a.scrollTop+=(lastY-lastlastY)*20/(now-stopTime)
    if(Math.abs(lastY-lastlastY)*8/(now-stopTime)>1)
      requestAnimationFrame(rfunc)
  })
}
)

</script>
</body>
</html>